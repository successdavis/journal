import{c as l,o as a,e,d as w,w as $,h as P,t as d,u as C,S,p as c,q as N,j as b,v as V,i as f,F as h,r as y,k as _,s as B,b as M}from"./app-9CDljykP.js";import{_ as J}from"./GuestLayout-DUlRu_tj.js";const T={class:"flex items-start gap-6 bg-white shadow-sm rounded-lg overflow-hidden px-4"},U=["src"],A={class:"text-sm text-gray-500 flex items-center gap-1 mb-1"},D={class:"text-lg font-semibold text-gray-800 leading-snug"},E={class:"text-gray-600 text-sm mt-1"},F={__name:"JournalCard",props:{journal:Object},setup(s){return(r,o)=>(a(),l("div",T,[e("img",{src:s.journal.image,alt:"journal",class:"w-32 h-32 object-cover rounded-md"},null,8,U),w(C(S),{href:`/browse/journals-and-books/${s.journal.id}/show`},{default:$(()=>[e("p",A,[o[0]||(o[0]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 15c3.314 0 6.315 1.21 8.879 3.204M15 10a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),P(" "+d(s.journal.author),1)]),e("h3",D,d(s.journal.title),1),e("p",E,d(s.journal.excerpt),1)]),_:1},8,["href"])]))}},I={class:"flex items-center gap-2"},O=["disabled"],q={class:"text-sm font-medium text-gray-700"},z=["disabled"],L={__name:"Pagination",props:{currentPage:Number,totalPages:Number},setup(s){return(r,o)=>(a(),l("div",I,[e("button",{class:"px-3 py-1 bg-gray-300 text-sm rounded hover:bg-gray-400",disabled:s.currentPage===1,onClick:o[0]||(o[0]=u=>r.$emit("page-changed",s.currentPage-1))}," Previous ",8,O),e("span",q," Page "+d(s.currentPage)+" of "+d(s.totalPages),1),e("button",{class:"px-3 py-1 bg-gray-300 text-sm rounded hover:bg-gray-400",disabled:s.currentPage===s.totalPages,onClick:o[1]||(o[1]=u=>r.$emit("page-changed",s.currentPage+1))}," Next ",8,z)]))}},Q={class:"max-w-7xl mx-auto py-10"},R={class:"flex justify-between items-center mb-12 flex-col sm:flex-row gap-4"},G={class:"px-4 grid grid-cols-1 md:grid-cols-4 gap-6"},H={class:"md:col-span-1 space-y-6"},K={key:0},W=["id","value"],X=["for"],Y={class:"flex items-center space-x-2"},Z={class:"md:col-span-3"},ee={key:0,class:"space-y-6"},te={key:1,class:"space-y-6"},se={key:2,class:"text-center text-gray-500"},ae={key:3,class:"flex justify-center mt-10"},le=Object.assign({layout:J},{__name:"Index",setup(s){const r=c([]),o=c([]),u=c({current_page:1,total_pages:1}),p=c(!0),v=c(""),i=c({types:[],acceptsSubmissions:!1}),g=async(m=1)=>{p.value=!0;try{const t=await B.get("/api/publications",{params:{page:m,search:v.value,types:i.value.types,acceptsSubmissions:i.value.acceptsSubmissions?1:0}});r.value=t.data.publications.data,u.value={current_page:t.data.publications.current_page,total_pages:t.data.publications.last_page},o.value.length===0&&t.data.types&&(o.value=t.data.types)}catch(t){console.error("Error fetching journals:",t)}finally{p.value=!1}},k=m=>{g(m)};return N(()=>g()),(m,t)=>(a(),l("div",Q,[e("div",R,[t[3]||(t[3]=e("h1",{class:"text-3xl font-bold text-gray-800"},"Research Journal Catalogue",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>v.value=n),onInput:g,type:"text",placeholder:"Search journals...",class:"border border-gray-300 rounded-lg py-2 px-4 w-full focus:outline-none focus:ring-2 focus:ring-orange-500"},null,544),[[V,v.value]])]),e("div",G,[e("aside",H,[o.value.length?(a(),l("div",K,[t[4]||(t[4]=e("h2",{class:"text-lg font-semibold text-gray-700 mb-2"},"Publication type",-1)),(a(!0),l(h,null,y(o.value,(n,x)=>(a(),l("div",{key:x,class:"flex items-center space-x-2"},[b(e("input",{type:"checkbox",id:`type-${n.title}`,value:n.title,"onUpdate:modelValue":t[1]||(t[1]=j=>i.value.types=j),onChange:g,class:"accent-orange-600 w-4 h-4 rounded"},null,40,W),[[_,i.value.types]]),e("label",{for:`type-${n.title}`,class:"text-sm text-gray-700"},d(n.title),9,X)]))),128))])):f("",!0),e("div",null,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold text-gray-700 mb-2"},"Journal status",-1)),e("div",Y,[b(e("input",{type:"checkbox",id:"accepts-submissions","onUpdate:modelValue":t[2]||(t[2]=n=>i.value.acceptsSubmissions=n),onChange:g,class:"accent-orange-600 w-4 h-4 rounded"},null,544),[[_,i.value.acceptsSubmissions]]),t[5]||(t[5]=e("label",{for:"accepts-submissions",class:"text-sm text-gray-700"},"Accepts submissions",-1))])])]),e("div",Z,[p.value?(a(),l("div",ee,[(a(),l(h,null,y(3,n=>e("div",{key:n,class:"animate-pulse bg-white p-4 rounded-lg shadow"},t[7]||(t[7]=[e("div",{class:"h-4 bg-gray-300 rounded w-3/4 mb-2"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-1/2 mb-1"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-full"},null,-1)]))),64))])):r.value.length?(a(),l("div",te,[(a(!0),l(h,null,y(r.value,(n,x)=>(a(),M(F,{key:x,journal:n},null,8,["journal"]))),128))])):(a(),l("div",se,"No journals found.")),u.value.total_pages>1&&!p.value?(a(),l("div",ae,[w(L,{"current-page":u.value.current_page,"total-pages":u.value.total_pages,onPageChanged:k},null,8,["current-page","total-pages"])])):f("",!0)])])]))}});export{le as default};
