import{p as x,c as i,o as l,e as t,i as f,h as B,t as y,n as M,F as v,r as w,b as C,x as T,m as _,w as j,f as U,j as b,u as o,v as p,l as A,d as D,A as E}from"./app-CQ9HrJZy.js";const L={class:"bg-gray-50 border border-gray-200 rounded-md p-3"},O={class:"font-semibold text-gray-700 flex justify-between items-center"},F={class:"text-sm text-gray-500"},z={key:0,class:"mt-2 ml-4 space-y-2 text-sm text-gray-600"},h={__name:"ExistingCategories",props:{category:Object},setup(n){const g=x(!1);return(s,a)=>(l(),i("li",L,[t("div",{onClick:a[0]||(a[0]=m=>g.value=!g.value),class:"cursor-pointer"},[t("div",O,[B(y(n.category.name)+" ",1),n.category.subcategories&&n.category.subcategories.length?(l(),i("svg",{key:0,class:M([{"rotate-180":g.value},"w-4 h-4 transition-transform duration-300"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[1]||(a[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)):f("",!0)]),t("div",F,"Slug: "+y(n.category.slug),1)]),g.value&&n.category.subcategories&&n.category.subcategories.length?(l(),i("ul",z,[(l(!0),i(v,null,w(n.category.subcategories,(m,c)=>(l(),C(h,{key:c,category:m},null,8,["category"]))),128))])):f("",!0)]))}},H={class:"max-w-6xl mx-auto mt-10 px-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-8 bg-white rounded-2xl shadow-lg p-6"},P={class:"order-1 md:order-2"},R={key:0,class:"text-sm text-red-500"},q=["value"],G=["disabled"],J={class:"order-2 md:order-1"},K={class:"space-y-2"},W={__name:"Create",props:{categories:Array},setup(n){let g=n;const s=T({name:"",slug:"",description:"",parent_id:null}),a=x([]);let m=x([]);a.value=g.categories;function c(d,e=null){return d.filter(r=>r.parent_id===e).map(r=>({...r,subcategories:c(d,r.id)}))}m.value=c(a.value);function S(){s.slug=s.name.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-")}function V(){axios.post("/editor/categories/create",s).then(d=>{a.value=d.data.categories,m.value=c(a.value),s.name="",s.slug="",s.description="",s.parent_id=null})}const k=(d,e=null,r=0)=>d.filter(u=>u.parent_id===e).flatMap(u=>{const N="â€”".repeat(r);return[{id:u.id,name:`${N} ${u.name}`.trim()},...k(d,u.id,r+1)]}),$=_(()=>k(a.value));return(d,e)=>(l(),C(E,null,{default:j(()=>[t("div",H,[t("div",I,[t("div",P,[e[9]||(e[9]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-4"},"Create New Category",-1)),t("form",{onSubmit:U(V,["prevent"]),class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Category Name",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o(s).name=r),onInput:S,type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"e.g., Health Sciences"},null,544),[[p,o(s).name]]),o(s).errors.name?(l(),i("span",R,y(o(s).errors.name),1)):f("",!0)]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o(s).slug=r),type:"text",class:"mt-1 block w-full border border-gray-200 rounded-md p-2 bg-gray-100 text-gray-600",readonly:""},null,512),[[p,o(s).slug]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Parent Category (Optional)",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>o(s).parent_id=r),class:"mt-1 block w-full border border-gray-300 rounded-md p-2 bg-white"},[e[6]||(e[6]=t("option",{value:null},"-- This is a Root Category --",-1)),(l(!0),i(v,null,w($.value,r=>(l(),i("option",{key:r.id,value:r.id},y(r.name),9,q))),128))],512),[[A,o(s).parent_id]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),b(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>o(s).description=r),class:"mt-1 block w-full border border-gray-200 rounded-md p-2 bg-gray-100 text-gray-600",rows:"4"},null,512),[[p,o(s).description]])]),t("button",{type:"submit",disabled:o(s).processing,class:"bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded shadow w-full"},y(o(s).processing?"Submitting...":"Create Category"),9,G)],32)]),t("div",J,[e[10]||(e[10]=t("h3",{class:"text-2xl font-bold text-gray-800 mb-4"},"Existing Categories",-1)),t("ul",K,[(l(!0),i(v,null,w(o(m),(r,u)=>(l(),i("li",{key:u,class:"bg-gray-50 border border-gray-200 rounded-md p-3"},[D(h,{category:r},null,8,["category"])]))),128))])])])])]),_:1}))}};export{W as default};
