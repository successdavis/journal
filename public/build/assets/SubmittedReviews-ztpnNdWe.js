import{p as x,c,o as m,e,F as w,r as g,t as l,j as b,l as R,s as f,i as k,h as y,v as _,d as h,a as C,z as D,q as A,u as S}from"./app-CQ9HrJZy.js";const T={class:"bg-white my-6 rounded-lg shadow-md space-y-4 py-6"},M={class:"min-w-full bg-white border rounded text-sm"},j={class:"px-4 py-2 border"},V={class:"px-4 py-2 border"},N={class:"px-4 py-2 border"},F={class:"px-4 py-2 border"},q={class:"px-4 py-2 border"},I={class:"px-4 py-2 border text-red-500"},E=["onClick"],z=["value"],B=["disabled"],U={__name:"AssignReviewerSection",props:{itemId:Number,existingReviewers:Array,reviewers:Array},setup(i){const o=i,a=x([...o.existingReviewers]),n=x("");x("");function d(p){return new Date(p).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function u(){n.value&&(a.value.find(t=>t.reviewer_id===n.value.id)||f.post(`/editor/${n.value.id}/assign-reviewer/${o.itemId}`).then(t=>{t.status===200&&(a.value=t.data,n.value="")}))}function r(p,t){console.log(p,o.itemId),a.value.splice(t,1),f.delete(`/editor/${p}/assign-reviewer/${o.itemId}`).then(s=>{})}return(p,t)=>(m(),c(w,null,[t[6]||(t[6]=e("hr",null,null,-1)),e("div",T,[t[5]||(t[5]=e("h2",{class:"text-xl font-semibold text-gray-800"},"📝 Assign / Reassign Reviewers",-1)),e("table",M,[t[2]||(t[2]=e("thead",{class:"bg-gray-100 text-left"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"Reviewer Name"),e("th",{class:"px-4 py-2 border"},"Request Status"),e("th",{class:"px-4 py-2 border"},"Reviewed On"),e("th",{class:"px-4 py-2 border"},"Status"),e("th",{class:"px-4 py-2 border"},"Assigned on"),e("th",{class:"px-4 py-2 border"},"Delete")])],-1)),e("tbody",null,[(m(!0),c(w,null,g(a.value,(s,v)=>(m(),c("tr",{key:v,class:"border-b"},[e("td",j,l(s.reviewer.name),1),e("td",V,l(s.request_status),1),e("td",N,l(s.complete_reviewed_on??"Not yet reviewed"),1),e("td",F,l(s.status),1),e("td",q,l(d(s.created_at)),1),e("td",I,[e("button",{onClick:$=>r(s.reviewer.id,v),class:"text-red-500 text-sm hover:underline"}," Remove ",8,E)])]))),128)),t[1]||(t[1]=e("hr",null,null,-1))])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Select Reviewer:",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-teal-600"},[t[3]||(t[3]=e("option",{value:"",disabled:"",selected:""},"Select a reviewer",-1)),(m(!0),c(w,null,g(i.reviewers,s=>(m(),c("option",{key:s.id,value:s},l(s.name)+" ("+l(s.email)+") ",9,z))),128))],512),[[R,n.value]]),e("button",{onClick:u,class:"mt-3 bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-700",disabled:!n.value}," Assign Reviewer ",8,B)])]),t[7]||(t[7]=e("hr",null,null,-1))],64))}},L={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},O={class:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-xl w-full max-w-md"},Y={class:"text-l text-gray-900 mb-4"},P={class:"font-semibold uppercase"},W={class:"text-gray-700 dark:text-gray-300 mb-4"},G={class:"mb-4"},H={class:"mb-6"},J={__name:"ConfirmationModal",props:{decision:String,show:Boolean,manuscriptTitle:String},emits:["confirm","cancel"],setup(i,{emit:o}){const a=o,n=x(""),d=x("");function u(){a("confirm",{commentToAuthor:n.value,commentToReviewer:d.value})}function r(){a("cancel")}return(p,t)=>i.show?(m(),c("div",L,[e("div",O,[t[7]||(t[7]=e("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Confirm Final Decision ",-1)),e("p",Y,[t[2]||(t[2]=y(" You choose ")),e("strong",P,l(i.decision),1)]),e("p",W,[t[3]||(t[3]=y(" Are you sure this is your final decision for the review of ")),e("strong",null,l(i.manuscriptTitle),1),t[4]||(t[4]=y("? "))]),e("div",G,[t[5]||(t[5]=e("label",{class:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1"}," Comment to Author (optional) ",-1)),b(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),class:"w-full px-3 py-2 border rounded-lg text-sm dark:bg-gray-800 dark:text-white dark:border-gray-600",rows:"3"},null,512),[[_,n.value]])]),e("div",H,[t[6]||(t[6]=e("label",{class:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1"}," Comment to Reviewer (optional) ",-1)),b(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),class:"w-full px-3 py-2 border rounded-lg text-sm dark:bg-gray-800 dark:text-white dark:border-gray-600",rows:"3"},null,512),[[_,d.value]])]),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:r,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded hover:bg-gray-300"}," No "),e("button",{onClick:u,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"}," Yes ")])])])):k("",!0)}},K={class:"pt-4 my-6"},Q={class:"flex w-full justify-start"},X={class:"w-full max-w-md mx-auto"},Z={class:"relative bg-white p-6 rounded-xl shadow-xl w-fit"},ee={class:"w-full"},te={__name:"EditorDecision",props:{review:Object,item:Array,reviewers:Array,existingReviewers:Array},setup(i){let o=i;const a=x(!1),n=x(!1),d=x(""),u=x(null);function r(t){d.value=o.review.review_manuscript.manuscript.title,u.value=o.review.id,a.value=!0}function p({commentToAuthor:t,commentToReviewer:s}){const v={manuscript_id:o.review.review_manuscript.manuscript.id,submitted_review_id:o.review.id,round:o.review.round,decision:o.review.selectedDecision,comments_to_author:t,comments_to_reviewer:s};f.post(`/editor/${o.review.id}/make-decision`,v).then($=>{o.review.selectedDecision==="request_additional_review"&&(n.value=!0)}),a.value=!1}return(t,s)=>(m(),c(w,null,[e("div",K,[e("div",Q,[e("div",X,[b(e("select",{id:"editorDecision","onUpdate:modelValue":s[0]||(s[0]=v=>i.review.selectedDecision=v),onChange:s[1]||(s[1]=v=>r(i.review)),class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"},s[6]||(s[6]=[C('<option disabled value="" selected> Make Decision</option><option value="accept">✅ Accept</option><option value="minor_revisions">🛠️ Minor Revisions</option><option value="major_revisions">🧰 Major Revisions</option><option value="reject">❌ Reject</option><option value="request_additional_review">🔁 Request Additional Review</option><option value="resubmit_elsewhere">📦 Resubmit Elsewhere</option><option value="withdrawn_by_author" disabled class="text-gray-400">🚫 Withdrawn by Author (optional) </option>',8)]),544),[[R,i.review.selectedDecision]])]),i.review.submit_option==="draft"?(m(),c("button",{key:0,onClick:s[2]||(s[2]=v=>t.editReview(i.review)),class:"px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700"}," Edit ")):k("",!0)])]),h(J,{decision:i.review.selectedDecision,show:a.value,manuscriptTitle:d.value,onConfirm:p,onCancel:s[3]||(s[3]=v=>a.value=!1)},null,8,["decision","show","manuscriptTitle"]),b(e("div",{onClick:s[5]||(s[5]=v=>n.value=!1),class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},[e("div",Z,[s[7]||(s[7]=e("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," Confirm Final Decision ",-1)),h(U,{itemId:i.item.id,reviewers:i.reviewers,existingReviewers:i.existingReviewers},null,8,["itemId","reviewers","existingReviewers"]),e("div",ee,[e("button",{onClick:s[4]||(s[4]=v=>n.value=!1),class:"px-4 py-2 mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Cancel action ")])])],512),[[D,n.value]])],64))}},se={class:""},ie={class:"min-w-full divide-y divide-gray-200 text-sm"},oe={class:"divide-y divide-gray-100 bg-white"},ne={class:"px-4 py-2 font-medium text-blue-700"},re={class:"px-4 py-2 capitalize"},le={class:"px-4 py-2"},ae={class:"px-4 py-2"},de={class:"px-4 py-2 max-w-xs"},ue={class:"px-4 py-2"},ce={class:"px-4 py-2"},me=["href"],ve={class:"px-4 py-2 space-x-2 flex flex-nowrap"},pe=["onClick"],xe={key:0,class:"px-4 py-2 font-medium text-blue-700"},we={key:1,class:"px-4 py-2 font-medium text-blue-700"},be={__name:"SubmittedReviews",props:{item:Array,reviewers:Array,existingReviewers:Array},setup(i){let o=x([]),a=i;A(()=>{axios.get(`/editor/all-reviews/${a.item.id}`).then(d=>{o.value=d.data,o=o.map(u=>({...u,selectedDecision:""}))})});function n(d){return new Date(d).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}return(d,u)=>(m(),c("div",se,[u[2]||(u[2]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Submitted Reviews",-1)),e("table",ie,[u[1]||(u[1]=e("thead",{class:"bg-teal-100 text-gray-600 text-left"},[e("tr",null,[e("th",{class:"px-4 py-3"},"Round"),e("th",{class:"px-4 py-3"},"Reviewer"),e("th",{class:"px-4 py-3"},"Manuscript Title "),e("th",{class:"px-4 py-3"},"Review Title"),e("th",{class:"px-4 py-3"},"Comment to editor"),e("th",{class:"px-4 py-3"},"Submitted On"),e("th",{class:"px-4 py-3"},"File"),e("th",{class:"px-4 py-3"},"Actions"),e("th",{class:"px-4 py-3"},"Editor’s Decision")])],-1)),e("tbody",oe,[(m(!0),c(w,null,g(S(o),r=>(m(),c("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",ne,"Round "+l(r.round),1),e("td",re,l(r.review_manuscript.reviewer.name),1),e("td",le,l(r.review_manuscript.manuscript.title),1),e("td",ae,l(r.review_title),1),e("td",de,l(r.comment_to_editor),1),e("td",ue,l(n(r.created_at)),1),e("td",ce,[e("a",{href:`/${r.annotated_manuscript}`,target:"_blank",class:"text-blue-600 hover:underline"},"PDF",8,me)]),e("td",ve,[e("button",{onClick:p=>d.viewReview(r),class:"px-3 py-1 text-blue-600 text-xs rounded hover:bg-teal-800"},u[0]||(u[0]=[y(" View full "),e("br",null,null,-1),y(" Review ")]),8,pe)]),r.review_manuscript.manuscript.status==="under_review"?(m(),c("td",xe,[h(te,{review:r,item:i.item,reviewers:i.reviewers,existingReviewers:i.existingReviewers},null,8,["review","item","reviewers","existingReviewers"])])):(m(),c("td",we,l(r.review_manuscript.manuscript.status),1))]))),128))])])]))}};export{U as _,be as a};
